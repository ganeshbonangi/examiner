<div>
    <div text-angular-toolbar ta-toolbar="at.toolBarFeatures" name="statictoolbar" class="statictoolbar" id="statictoolbar" ng-class="{'sticky':at.boolChangeClass}"></div>
    <div class="auther-tmp-container">
        <div class="panel panel-default">
            <div class="panel-body">
                Select Subject
                 <select ng-model="at.chapters" ng-options="subject.chapters as subject.displaytext for subject in at.subjects">
                </select>
                Select Chapter
                <select ng-model="at.cat" ng-change="at.chapterChange();at.showCatErrMessage=false;" ng-options="chapter.url as chapter.displaytext for chapter in at.chapters">
                </select>
                <button class="btn btn-primary btn-xs" ng-click="at.getQuestion()">Get Questions</button>
                <a class="btn btn-default btn-xs" target="_blank" href="/mocktest?mocktestId={{at.cat}}"><i class="fa fa-eye" aria-hidden="true"></i> Preview </a>
                <uib-alert type="danger" ng-show="at.showCatErrMessage">
                    <strong>Warning!</strong> Please Select Chapter First.
                </uib-alert>
            </div>
        </div>
        <!--div id="questionContainer">
            Enter question information(This is for passages)
            <div text-angular ng-model="at.questions.information" ta-default-wrap="p" ta-target-toolbars='statictoolbar'> </div>
            <br />
            <div>
            </div>
        </div> -->
        <div>
            <uib-accordion close-others="false">
                <uib-accordion-group ng-init="isOpned = true;" is-open="isOpned" ng-repeat="question in at.questions">
                <div class="question-block">
                  <uib-accordion-heading ng-class="at.isInValid[$index]?'bg-danger':'bg-success'">
                    <span class="badge badge-auth">{{$index+1}}</span>
                    <p class="inline-block" ng-bind-html="at.stripText(question.questiontext)"></p>
                    <span class="pull-right action-panel">
                        <button ng-disabled="!isOpned" class="btn btn-default btn-xs" ng-click="at.editQuestion($event, $index)">
                            <i class="fa fa-pencil" aria-hidden="true"></i> Edit
                        </button>                        
                        <button ng-disabled="!at.editModeOn[$index]" class="btn btn-default btn-xs" ng-click="at.saveQuestion($event, $index)">
                            <i class="fa fa-floppy-o" aria-hidden="true"></i> Save
                        </button>                        
                        <button ng-disabled="!at.editModeOn[$index]" class="btn btn-default btn-xs" ng-click="at.deleteQuestion($event, $index)">
                            <i class="fa fa-trash" aria-hidden="true"></i> Delete
                        </button>
                        <i class="glyphicon" ng-class="{'glyphicon-chevron-down': isOpned, 'glyphicon-chevron-right': !isOpned}" ></i>
                    </span>
                  </uib-accordion-heading>
                  <uib-alert type="danger" ng-show="at.isInValid[$index]"><strong>Warning!</strong> Invalid Question to save.</uib-alert>
                  <mcmq-auth question="question" is-ans="isAns" edit-mode-on="at.editModeOn[$index]"> </mcmq-auth> 
                  <div class="loader-layer" ng-show="at.loader[$index]">
                  </div>
                  <i class="fa fa-spinner fa-spin" ng-show="at.loader[$index]" ></i>
                </div>
                </uib-accordion-group>
            </uib-accordion>
            <div class="add-question">
                <button class="btn btn-default btn-xs" ng-click="at.addQuestion()">
                    <i class="fa fa-plus" aria-hidden="true"></i> Add Question 
                </button>   
            </div>
        </div>
        <div class="loader-layer" ng-show="at.showLoader">
        </div>
        <i class="fa fa-spinner fa-spin" ng-show="at.showLoader" ></i>
        <div style="height:40px;"></div>
    </div>
</div>
